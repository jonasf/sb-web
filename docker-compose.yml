version: '3.0'

services: 
    web:
        image: jonasfred/sb-web
        expose:
            - 8080
        ports:
            - 8080:8080
        links: 
            - elasticsearch
        depends_on: 
            - elasticsearch
        environment:
            - ES-URL=http://elasticsearch:9200
            - DELAYED-START=30s

    indexer:
        image: jonasfred/sb-indexer
        links: 
            - elasticsearch
        depends_on: 
            - elasticsearch
        environment:
            - ES-URL=http://elasticsearch:9200
            - DELAYED-START=30s    

    elasticsearch:
        image: elasticsearch:5.2.1
        expose:
            - 9200
        ports:
            - 9200:9200
